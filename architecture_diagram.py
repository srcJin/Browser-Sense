
┌─────────────────────────────────────────────────────────────────────────────┐
│                           VIBETEST ARCHITECTURE                             │
└─────────────────────────────────────────────────────────────────────────────┘

┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Claude Code   │    │     Cursor      │    │   Other MCP     │
│      Client     │    │     Client      │    │    Clients      │
└─────────┬───────┘    └─────────┬───────┘    └─────────┬───────┘
          │                      │                      │
          └──────────────────────┼──────────────────────┘
                                 │
                        ┌────────▼────────┐
                        │   MCP Protocol  │
                        └────────┬────────┘
                                 │
                    ┌────────────▼────────────┐
                    │    mcp_server.py        │
                    │  ┌─────────────────────┐ │
                    │  │ start(url, agents)  │ │
                    │  │ results(test_id)    │ │
                    │  └─────────────────────┘ │
                    └────────────┬────────────┘
                                 │
                    ┌────────────▼────────────┐
                    │      agents.py          │
                    │                         │
┌───────────────────┼─────────────────────────┼───────────────────┐
│                   │                         │                   │
│  ┌────────────────▼──────────┐  ┌──────────▼──────────┐        │
│  │     scout_page()          │  │   run_pool()        │        │
│  │                           │  │                     │        │
│  │ ┌─────────────────────┐   │  │ ┌─────────────────┐ │        │
│  │ │ Browser Session     │   │  │ │ Semaphore       │ │        │
│  │ │ + Gemini AI        │   │  │ │ (max 10 agents) │ │        │
│  │ └─────────────────────┘   │  │ └─────────────────┘ │        │
│  │          │                │  │          │          │        │
│  │          ▼                │  │          ▼          │        │
│  │ ┌─────────────────────┐   │  │ ┌─────────────────┐ │        │
│  │ │ Identify Elements   │   │  │ │ Multiple Agents │ │        │
│  │ │ Generate Tasks      │   │  │ │ (parallel)      │ │        │
│  │ └─────────────────────┘   │  │ └─────┬───────────┘ │        │
│  └─────────────┬─────────────┘  └───────┼─────────────┘        │
│                │                        │                      │
└────────────────┼────────────────────────┼──────────────────────┘
                 │                        │
                 ▼                        ▼
        ┌─────────────────┐      ┌─────────────────┐
        │   Task List     │      │   Agent Pool    │
        │                 │      │                 │
        │ • Header nav    │      │ Agent 1 ────────┼──┐
        │ • Main content  │      │ Agent 2 ────────┼──┤
        │ • Footer links  │      │ Agent 3 ────────┼──┤
        │ • Forms         │      │ Agent N ────────┼──┤
        │ • Sidebar       │      │                 │  │
        └─────────────────┘      └─────────────────┘  │
                                                      │
        ┌─────────────────────────────────────────────┘
        │
        ▼
┌───────────────────────────────────────────────────────┐
│                Browser Sessions                       │
│                                                       │
│ ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐ │
│ │ Chromium │ │ Chromium │ │ Chromium │ │ Chromium │ │
│ │ Agent 1  │ │ Agent 2  │ │ Agent 3  │ │ Agent N  │ │
│ │          │ │          │ │          │ │          │ │
│ │ Vision + │ │ Vision + │ │ Vision + │ │ Vision + │ │
│ │ Gemini   │ │ Gemini   │ │ Gemini   │ │ Gemini   │ │
│ └────┬─────┘ └────┬─────┘ └────┬─────┘ └────┬─────┘ │
└──────┼────────────┼────────────┼────────────┼───────┘
       │            │            │            │
       ▼            ▼            ▼            ▼
┌─────────────────────────────────────────────────────┐
│                Target Website                       │
│                                                     │
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐   │
│  │ Header  │ │ Content │ │ Footer  │ │  Forms  │   │
│  │ Testing │ │ Testing │ │ Testing │ │ Testing │   │
│  └─────────┘ └─────────┘ └─────────┘ └─────────┘   │
└─────────────────────────────────────────────────────┘
       │            │            │            │
       ▼            ▼            ▼            ▼
┌─────────────────────────────────────────────────────┐
│                 Test Results                        │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │          Raw Agent Reports                  │   │
│  │  • Agent 1: Navigation test results        │   │
│  │  • Agent 2: Form interaction results       │   │
│  │  • Agent 3: Link verification results      │   │
│  │  • Agent N: Accessibility test results     │   │
│  └─────────────────────────────────────────────┘   │
│                      │                             │
│                      ▼                             │
│  ┌─────────────────────────────────────────────┐   │
│  │         AI Analysis & Classification        │   │
│  │         (summarize_bug_reports)             │   │
│  │                                             │   │
│  │  ┌─────────────┐ ┌─────────────┐ ┌────────┐ │   │
│  │  │ HIGH        │ │ MEDIUM      │ │ LOW    │ │   │
│  │  │ SEVERITY    │ │ SEVERITY    │ │ SEVER. │ │   │
│  │  │             │ │             │ │        │ │   │
│  │  │ 🔴 Critical │ │ 🟠 Moderate │ │ 🟡 Minor│ │   │
│  │  │ Issues      │ │ Issues      │ │ Issues │ │   │
│  │  └─────────────┘ └─────────────┘ └────────┘ │   │
│  └─────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────┘
                      │
                      ▼
            ┌─────────────────────┐
            │   Final Report      │
            │                     │
            │ • Status: ✅🟡🟠🔴   │
            │ • Duration: 2m 15s  │
            │ • Issues Found: 3   │
            │ • Detailed Findings │
            └─────────────────────┘
